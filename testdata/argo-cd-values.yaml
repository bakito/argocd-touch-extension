global:
  logging:
    level: debug
dex:
  enabled: false
notifications:
  enabled: false
configs:
  rbac:
    "policy.csv": |-
      p, role:readonly, extensions, invoke, touch-configmaps, allow
      p, role:readonly, extensions, invoke, touch-pods, allow
      p, role:readonly, extensions, invoke, touch-sa, allow

  params:
    "server.disable.auth": true
    "server.enable.proxy.extension": true
  cm:
    "extension.config.touch-configmaps": |-
      services:
        - url: http://argo-cd-touch-extension:8080
          headers:
            - name: Argocd-Touch-Extension-Name
              value: configmaps
    "extension.config.touch-pods": |-
      services:
        - url: http://argo-cd-touch-extension:8080
          headers:
            - name: Argocd-Touch-Extension-Name
              value: pods
    "extension.config.touch-sa": |-
      services:
        - url: http://argo-cd-touch-extension:8080
          headers:
            - name: Argocd-Touch-Extension-Name
              value: sa

server:
  #image:
  #  repository: localhost:5001/argocd
  #  tag: latest
  initContainers:
    - name: extension-touch
      image: ghcr.io/bakito/argocd-touch-extension:v0.0.6
      args:
        - install
      env:
        - name: EXTENSION_BASE_URL
          value: http://argo-cd-touch-extension:8080
      volumeMounts:
        - name: tmp
          mountPath: /tmp
